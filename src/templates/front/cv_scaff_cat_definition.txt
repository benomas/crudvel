import CvResourceMap from 'src/customs/crudvuel/resource/CvResourceMap'
//TODO
//Convert to slug
import CvCreate    from 'src/components/resources/<##[plural|slug](resource)##>/CvCreate.vue'
import CvEdit      from 'src/components/resources/<##[plural|slug](resource)##>/CvEdit.vue'
import CvIndex     from 'src/components/resources/<##[plural|slug](resource)##>/CvIndex.vue'
import CvShow      from 'src/components/resources/<##[plural|slug](resource)##>/CvShow.vue'
import OwnService  from 'src/services/<##[singular|studly](resource)##>'
import filler      from 'src/fillers/<##[singular|camel](resource)##>.js'

let resourceName = '<##[plural|slug](resource)##>'
//TODO: check for default icon
export default function (globals) {
  let resource = new CvResourceMap({
    name         : resourceName,
    icon         : 'fas fa-',
    path         : resourceName,
    keyName      : 'id',
    pluralName   : '<##[plural|slug](resource)##>',
    singularName : '<##[singular|slug](resource)##>',
    crudServices : new OwnService(globals['cvComunicator'],resourceName),
    mainSection  : 'catalogs',
    filler
  })

  resource.setActions([
    {
      name       : 'index',
      icon       : '',
      getService : resource.loadService('index'),
      resource   : resource,
      path       : resource.path + '',
      component  : CvIndex,
      type       : 'rows'
    },

    {
      name       : 'create',
      icon       : '',
      setService : resource.loadService('store'),
      resource   : resource,
      path       : resource.path + '/create',
      component  : CvCreate
    },

    {
      name          : 'show',
      icon          : '',
      getService    : resource.loadService('show'),
      resource      : resource,
      path          : resource.path + '/:id',
      urlParams     : ['id'],
      component     : CvShow,
      disableFields : true,
      isParentRoute : true
    },

    {
      name       : 'edit',
      icon       : '',
      getService : resource.loadService('show'),
      setService : resource.loadService('update'),
      resource   : resource,
      path       : resource.path + '/:id/edit',
      urlParams  : ['id'],
      component  : CvEdit
    },

    {
      name       : 'delete',
      icon       : '',
      getService : resource.loadService('show'),
      setService : resource.loadService('destroy'),
      resource   : resource,
      path       : resource.path + '/:id/delete',
      urlParams  : ['id'],
      component  : null
    },

    {
      name       : 'activate',
      icon       : '',
      setService : resource.loadService('activate'),
      resource   : resource,
      path       : resource.path + '/:id/activate',
      urlParams  : ['id'],
      component  : null
    },

    {
      name       : 'deactivate',
      icon       : '',
      setService : resource.loadService('deactivate'),
      resource   : resource,
      path       : resource.path + '/:id/deactivate',
      urlParams  : ['id'],
      component  : null
    }
  ])
  resource.resourcelangLoader()
  return resource
}
