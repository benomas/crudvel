<?php namespace  App\Http\Requests;

class <##[singular|studly](resource)##>Request extends \Customs\Crudvel\Requests\CrudRequest{

// [Authorization]
// [End Authorization]

// [Rules]
  public function defaultRules() {
    $this->rules = self::externalPostStoreRules()->fixRules();
  }

  public static function externalPostStoreRules(){
    return self::externalize([
      "name"   => "required|unique:<##[plural|snake](resource)##>,name",
      "active" => "boolean",
    ]);
  }

  public static function externalPutUpdateRules(){
    return self::externalize(self::externalPostStoreRules()->fixRules())->setExtraRules([
      'name' => "required|unique:<##[plural|snake](resource)##>,name,@<##[singular|camel](resource)##>Key@",
    ])->setMethod(__FUNCTION__);
  }

  public function putUpdate(){
    $this->rules = self::externalPutUpdateRules()
      ->setParam('<##[singular|camel](resource)##>Key',$this->getCurrentActionKey())
      ->fixRules();
  }
// [End Rules]
}
